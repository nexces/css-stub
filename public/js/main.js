document.addEventListener('DOMContentLoaded', function () {
    var $container = document.querySelector('.siteHeader');
    var $menuSwitch = document.querySelector('#nav-toggle');
    console.log('menu-collapse :: init');
    $menuSwitch.addEventListener('click', function (e) {
        console.log('menu-collapse :: handling event on #nav-toggle');
        e.preventDefault();
        e.stopPropagation();
        e.stopImmediatePropagation();
        $container.classList.toggle('nav-active');
    }, false);
    document.body.addEventListener('click', function () {
        console.log('menu-collapse :: handling event on body');
        $container.classList.remove('nav-active');
    }, false);
}, false);
var Slider = (function () {
    function Slider(sliderSelector, sliderConfiguration) {
        var _this = this;
        this.nextSlideDelay = 5000;
        this.setBackground = true;
        this.transition = 'fade';
        this.supportedTransitions = ['fade', 'slide'];
        this.autoProgress = true;
        this.allReady = false;
        this.containerHeight = 0;
        this.heightGuard = function () {
            var $slide, i;
            for (i = 0; i < _this.$$slides.length; i++) {
                $slide = _this.$$slides[i];
                $slide.style.minHeight = null;
            }
            _this.containerHeight = _this.$slidesContainer.clientHeight;
            for (i = 0; i < _this.$$slides.length; i++) {
                $slide = _this.$$slides[i];
                $slide.style.minHeight = _this.containerHeight + 'px';
            }
        };
        this.handleHover = function (e) {
            console.debug('Slider::handleHover()');
            if (e.type === 'mouseover') {
                _this.autoProgress = false;
                _this.blockAutoProgress();
            }
            if (e.type === 'mouseout') {
                _this.autoProgress = true;
                _this.resumeAutoProgress();
            }
        };
        this.blockAutoProgress = function () {
            console.debug('Slider::blockAutoProgress()');
            clearTimeout(_this.nextSlideTimeout);
            _this.nextSlideTimeout = 0;
        };
        this.resumeAutoProgress = function () {
            console.debug('Slider::resumeAutoProgress()');
            if (_this.allReady && _this.autoProgress) {
                _this.nextSlideTimeout = setTimeout(_this.loadSlide, _this.nextSlideDelay);
            }
        };
        this.loadSlide = function (num) {
            _this.blockAutoProgress();
            if (!_this.allReady) {
                return false;
            }
            var $current, currentData, $next, nextData, currentNum, nextNum, $currentDot, $nextDot;
            $current = _this.$slider.querySelector('.slide.active');
            if (!num) {
                if (!$current) {
                    $next = _this.$slider.querySelector('.slide.initial');
                }
                else {
                    $next = _this.$slider.querySelector('.slide.active + .slide');
                }
                if (!$next) {
                    $next = _this.$slider.querySelector('.slide:nth-child(1)');
                }
            }
            else {
                $next = _this.$slider.querySelector('.slide:nth-child(' + num + ')');
            }
            nextData = $next.dataset;
            if ($current) {
                $current.classList.remove('active');
                currentData = $current.dataset;
                currentNum = currentData.num || $current.className.match(/slide-(\d+)/)[1];
                if (_this.$dotsContainer) {
                    $currentDot = _this.$dotsContainer.querySelector('.dot:nth-child(' + currentNum + ')');
                    $currentDot.classList.remove('active');
                }
            }
            $next.classList.remove('initial');
            $next.classList.add('active');
            nextNum = nextData.num || $next.className.match(/slide-(\d+)/)[1];
            if (_this.$dotsContainer) {
                $nextDot = _this.$dotsContainer.querySelector('.dot:nth-child(' + nextNum + ')');
                $nextDot.classList.add('active');
            }
            _this.resumeAutoProgress();
        };
        this.arrowClick = function (e) {
            var $next, nextData, num, $arrow = e.target;
            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();
            if ($arrow.classList.contains('prev')) {
                $next = _this.$slider.querySelector('.slide + .slide.active');
                if ($next) {
                    $next = $next.previousElementSibling;
                }
                else {
                    $next = _this.$slider.querySelector('.slide:last-of-type');
                }
            }
            if ($arrow.classList.contains('next')) {
                $next = (_this.$slider.querySelector('.slide.active + .slide') || _this.$slider.querySelector('.slide:nth-child(1)'));
            }
            nextData = $next.dataset;
            num = nextData.num || $next.className.match(/slide-(\d+)/)[1];
            _this.loadSlide(num);
        };
        this.dotClick = function (e) {
            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();
            var $dot = e.target;
            var dotData = $dot.dataset;
            var num = parseInt(dotData.num || e.target.className.match(/slide-(\d+)/)[1]);
            _this.loadSlide(num);
        };
        this.imgReadyNotification = function (e) {
            var $img = e.target;
            var imgData = $img.dataset;
            imgData.ready = 'true';
        };
        this.imgReadyWait = function () {
            var $$img = _this.$slider.querySelectorAll('.slide .src[data-ready="false"]');
            if ($$img.length > 0) {
                setTimeout(_this.imgReadyWait, 100);
                _this.$slider.classList.add('waiting');
                return false;
            }
            _this.allReady = true;
            _this.$slider.classList.remove('waiting');
            _this.$slider.classList.add('ready');
            _this.loadSlide();
        };
        console.log('Slider::constructor()');
        this.$slider = document.querySelector(sliderSelector);
        if (!this.$slider) {
            console.warn('Slider::constructor() => no slider found via "%s"', sliderSelector);
            return this;
        }
        if (sliderConfiguration) {
            if (sliderConfiguration.nextSlideDelay) {
                this.nextSlideDelay = sliderConfiguration.nextSlideDelay;
            }
            if (sliderConfiguration.setBackground) {
                this.setBackground = sliderConfiguration.setBackground;
            }
            if (sliderConfiguration.transition) {
                if (this.supportedTransitions.indexOf(sliderConfiguration.transition) > -1) {
                    this.transition = sliderConfiguration.transition;
                }
                else {
                    console.warn('Slider::constructor() => Unsupported transition type "%s"; Falling back to "%s"', sliderConfiguration.transition, this.transition);
                }
            }
        }
        this.$slidesContainer = this.$slider.querySelector('.slides');
        this.$$slides = this.$slidesContainer.querySelectorAll('.slide');
        this.$dotsContainer = this.$slider.querySelector('.dots');
        if (this.$$slides.length > 1) {
            this.$slider.classList.add('controllable');
            if (this.transition == 'slide') {
                var $slides = this.$slider.querySelector('.slides');
                $slides.style.width = (this.$$slides.length * 100) + '%';
            }
        }
        this.$slider.addEventListener('mouseover', this.handleHover, false);
        this.$slider.addEventListener('mouseout', this.handleHover, false);
        if (this.$slider.querySelector('.prev')) {
            this.$slider.querySelector('.prev').addEventListener('click', this.arrowClick, false);
        }
        if (this.$slider.querySelector('.next')) {
            this.$slider.querySelector('.next').addEventListener('click', this.arrowClick, false);
        }
        if (this.transition == 'slide') {
            this.$$slides[0].parentElement.style.width = (this.$$slides.length * 100) + '%';
        }
        for (var i = 0; i < this.$$slides.length; i++) {
            var $slide = this.$$slides[i];
            var slideData = $slide.dataset;
            slideData.num = (i + 1).toString();
            $slide.classList.add('slide-' + (i + 1));
            var $currentDot = document.createElement('span');
            var currentDotData = $currentDot.dataset;
            $currentDot.className = 'dot';
            currentDotData.num = (i + 1).toString();
            $currentDot.classList.add('slide-' + (i + 1));
            $currentDot.addEventListener('click', this.dotClick, false);
            if (this.$dotsContainer) {
                this.$dotsContainer.appendChild($currentDot);
            }
            if (this.setBackground) {
                var $img = $slide.querySelector('.src');
                var imgData = $img.dataset;
                $slide.style.backgroundImage = 'url(' + $img.src + ')';
                imgData.ready = $img.complete ? 'true' : 'false';
                $img.addEventListener('load', this.imgReadyNotification);
            }
        }
        this.heightGuard();
        window.addEventListener('resize', this.heightGuard, false);
        if (this.setBackground) {
            this.imgReadyWait();
        }
        else {
            this.allReady = true;
            this.$slider.classList.remove('waiting');
            this.$slider.classList.add('ready');
            this.loadSlide();
        }
    }
    return Slider;
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NvdXJjZXMvdHMvbWVudS1jb2xsYXBzZS50cyIsIi4uLy4uL3NvdXJjZXMvdHMvc2xpZGVyLnRzIl0sIm5hbWVzIjpbIlNsaWRlciIsIlNsaWRlci5jb25zdHJ1Y3RvciJdLCJtYXBwaW5ncyI6IkFBR0EsUUFBUSxDQUFDLGdCQUFnQixDQUFDLGtCQUFrQixFQUFFO0lBQzFDLElBQUksVUFBVSxHQUFpQixRQUFRLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ3JFLElBQUksV0FBVyxHQUFpQixRQUFRLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ3RFLE9BQU8sQ0FBQyxHQUFHLENBQUMsdUJBQXVCLENBQUMsQ0FBQztJQUNyQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQztRQUM3QyxPQUFPLENBQUMsR0FBRyxDQUFDLGdEQUFnRCxDQUFDLENBQUM7UUFDOUQsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQ25CLENBQUMsQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUNwQixDQUFDLENBQUMsd0JBQXdCLEVBQUUsQ0FBQztRQUM3QixVQUFVLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUM5QyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDVixRQUFRLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRTtRQUNwQyxPQUFPLENBQUMsR0FBRyxDQUFDLHlDQUF5QyxDQUFDLENBQUM7UUFDdkQsVUFBVSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDOUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ2QsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FDRFY7SUFrQklBLGdCQUFZQSxjQUFzQkEsRUFBRUEsbUJBQXlDQTtRQWxCakZDLGlCQW1QQ0E7UUFs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Q0EsQ0FBQ0E7UUFDcEVBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLGdCQUFnQkEsQ0FBQ0EsVUFBVUEsRUFBRUEsSUFBSUEsQ0FBQ0EsV0FBV0EsRUFBRUEsS0FBS0EsQ0FBQ0EsQ0FBQ0E7UUFFbkVBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLGFBQWFBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQ3RDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxhQUFhQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxnQkFBZ0JBLENBQUNBLE9BQU9BLEVBQUVBLElBQUlBLENBQUNBLFVBQVVBLEVBQUVBLEtBQUtBLENBQUNBLENBQUNBO1FBQzFGQSxDQUFDQTtRQUNEQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxhQUFhQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUN0Q0EsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsYUFBYUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxPQUFPQSxFQUFFQSxJQUFJQSxDQUFDQSxVQUFVQSxFQUFFQSxLQUFLQSxDQUFDQSxDQUFDQTtRQUMxRkEsQ0FBQ0E7UUFFREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsSUFBSUEsT0FBT0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDN0JBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLGFBQWFBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLE1BQU1BLEdBQUdBLEdBQUdBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBO1FBQ3BGQSxDQUFDQTtRQUVEQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFFQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxFQUFFQSxDQUFDQTtZQUMzQ0EsSUFBSUEsTUFBTUEsR0FBaUJBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQzVDQSxJQUFJQSxTQUFTQSxHQUFlQSxNQUFNQSxDQUFDQSxPQUFPQSxDQUFDQTtZQUMzQ0EsU0FBU0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsUUFBUUEsRUFBRUEsQ0FBQ0E7WUFDakNBLE1BQU1BLENBQUNBLFNBQVNBLENBQUNBLEdBQUdBLENBQUNBLFFBQVFBLEdBQUdBLENBQUNBLENBQUNBLEdBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBRXZDQSxJQUFJQSxXQUFXQSxHQUFxQkEsUUFBUUEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7WUFDbkVBLElBQUlBLGNBQWNBLEdBQWFBLFdBQVdBLENBQUNBLE9BQU9BLENBQUNBO1lBQ25EQSxXQUFXQSxDQUFDQSxTQUFTQSxHQUFHQSxLQUFLQSxDQUFDQTtZQUM5QkEsY0FBY0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsUUFBUUEsRUFBRUEsQ0FBQ0E7WUFDdENBLFdBQVdBLENBQUNBLFNBQVNBLENBQUNBLEdBQUdBLENBQUNBLFFBQVFBLEdBQUdBLENBQUNBLENBQUNBLEdBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBRTVDQSxXQUFXQSxDQUFDQSxnQkFBZ0JBLENBQUNBLE9BQU9BLEVBQUVBLElBQUlBLENBQUNBLFFBQVFBLEVBQUVBLEtBQUtBLENBQUNBLENBQUNBO1lBQzVEQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDdEJBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLFdBQVdBLENBQUNBLFdBQVdBLENBQUNBLENBQUNBO1lBQ2pEQSxDQUFDQTtZQUNEQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDckJBLElBQUlBLElBQUlBLEdBQXNCQSxNQUFNQSxDQUFDQSxhQUFhQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQTtnQkFDM0RBLElBQUlBLE9BQU9BLEdBQWFBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBO2dCQUNyQ0EsTUFBTUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsZUFBZUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsR0FBR0EsR0FBR0EsR0FBR0EsQ0FBQ0E7Z0JBQ3ZEQSxPQUFPQSxDQUFDQSxLQUFLQSxHQUFHQSxJQUFJQSxDQUFDQSxRQUFRQSxHQUFHQSxNQUFNQSxHQUFHQSxPQUFPQSxDQUFDQTtnQkFDakRBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsTUFBTUEsRUFBRUEsSUFBSUEsQ0FBQ0Esb0JBQW9CQSxDQUFDQSxDQUFDQTtZQUM3REEsQ0FBQ0E7UUFDTEEsQ0FBQ0E7UUFFREEsSUFBSUEsQ0FBQ0EsV0FBV0EsRUFBRUEsQ0FBQ0E7UUFDbkJBLE1BQU1BLENBQUNBLGdCQUFnQkEsQ0FBQ0EsUUFBUUEsRUFBRUEsSUFBSUEsQ0FBQ0EsV0FBV0EsRUFBRUEsS0FBS0EsQ0FBQ0EsQ0FBQ0E7UUFFM0RBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBLENBQUNBO1lBQ3JCQSxJQUFJQSxDQUFDQSxZQUFZQSxFQUFFQSxDQUFDQTtRQUN4QkEsQ0FBQ0E7UUFBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDSkEsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsSUFBSUEsQ0FBQ0E7WUFDckJBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLFNBQVNBLENBQUNBLE1BQU1BLENBQUNBLFNBQVNBLENBQUNBLENBQUNBO1lBQ3pDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxTQUFTQSxDQUFDQSxHQUFHQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQTtZQUNwQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsRUFBRUEsQ0FBQ0E7UUFDckJBLENBQUNBO0lBQ0xBLENBQUNBO0lBcUlMRCxhQUFDQTtBQUFEQSxDQUFDQSxBQW5QRCxJQW1QQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBhZHJpYW5wIG9uIDMwLjA2LjE1LlxuICovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgIHZhciAkY29udGFpbmVyID0gPEhUTUxFbGVtZW50PiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2l0ZUhlYWRlcicpO1xuICAgIHZhciAkbWVudVN3aXRjaCA9IDxIVE1MRWxlbWVudD4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hdi10b2dnbGUnKTtcbiAgICBjb25zb2xlLmxvZygnbWVudS1jb2xsYXBzZSA6OiBpbml0Jyk7XG4gICAgJG1lbnVTd2l0Y2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnbWVudS1jb2xsYXBzZSA6OiBoYW5kbGluZyBldmVudCBvbiAjbmF2LXRvZ2dsZScpO1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgICRjb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnbmF2LWFjdGl2ZScpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnbWVudS1jb2xsYXBzZSA6OiBoYW5kbGluZyBldmVudCBvbiBib2R5Jyk7XG4gICAgICAgICRjb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnbmF2LWFjdGl2ZScpO1xuICAgIH0sIGZhbHNlKTtcbn0sIGZhbHNlKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBhZHJpYW5wIG9uIDAyLjA3LjE1LlxuICovXG5pbnRlcmZhY2UgU2xpZGVyQ29uZmlndXJhdGlvbiB7XG4gICAgbmV4dFNsaWRlRGVsYXk/OiBudW1iZXI7XG4gICAgc2V0QmFja2dyb3VuZD86IGJvb2xlYW47XG4gICAgdHJhbnNpdGlvbj86IHN0cmluZztcbn1cbmludGVyZmFjZSBTbGlkZURhdGEgZXh0ZW5kcyBET01TdHJpbmdNYXAge1xuICAgIG51bTogc3RyaW5nO1xufVxuaW50ZXJmYWNlIERvdERhdGEgZXh0ZW5kcyBET01TdHJpbmdNYXAge1xuICAgIG51bTogc3RyaW5nO1xufVxuaW50ZXJmYWNlIEltZ0RhdGEgZXh0ZW5kcyBET01TdHJpbmdNYXAge1xuICAgIHJlYWR5OiBzdHJpbmc7XG59XG5jbGFzcyBTbGlkZXIge1xuICAgIHByaXZhdGUgbmV4dFNsaWRlRGVsYXkgPSA1MDAwO1xuICAgIHByaXZhdGUgbmV4dFNsaWRlVGltZW91dDtcblxuICAgIHByaXZhdGUgc2V0QmFja2dyb3VuZCA9IHRydWU7XG4gICAgcHJpdmF0ZSB0cmFuc2l0aW9uID0gJ2ZhZGUnO1xuICAgIHByaXZhdGUgc3VwcG9ydGVkVHJhbnNpdGlvbnMgPSBbJ2ZhZGUnLCAnc2xpZGUnXTtcblxuICAgIHByaXZhdGUgJHNsaWRlcjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSAkc2xpZGVzQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlICQkc2xpZGVzOiBOb2RlTGlzdDtcbiAgICBwcml2YXRlICRkb3RzQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcblxuICAgIHByaXZhdGUgYXV0b1Byb2dyZXNzID0gdHJ1ZTtcbiAgICBwcml2YXRlIGFsbFJlYWR5ID0gZmFsc2U7XG5cbiAgICBwcml2YXRlIGNvbnRhaW5lckhlaWdodCA9IDA7XG5cbiAgICBjb25zdHJ1Y3RvcihzbGlkZXJTZWxlY3Rvcjogc3RyaW5nLCBzbGlkZXJDb25maWd1cmF0aW9uPzogU2xpZGVyQ29uZmlndXJhdGlvbilcbiAgICB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTbGlkZXI6OmNvbnN0cnVjdG9yKCknKTtcbiAgICAgICAgdGhpcy4kc2xpZGVyID0gPEhUTUxFbGVtZW50PiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNsaWRlclNlbGVjdG9yKTtcbiAgICAgICAgaWYgKCF0aGlzLiRzbGlkZXIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignU2xpZGVyOjpjb25zdHJ1Y3RvcigpID0+IG5vIHNsaWRlciBmb3VuZCB2aWEgXCIlc1wiJywgc2xpZGVyU2VsZWN0b3IpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2xpZGVyQ29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgaWYgKHNsaWRlckNvbmZpZ3VyYXRpb24ubmV4dFNsaWRlRGVsYXkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRTbGlkZURlbGF5ID0gc2xpZGVyQ29uZmlndXJhdGlvbi5uZXh0U2xpZGVEZWxheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzbGlkZXJDb25maWd1cmF0aW9uLnNldEJhY2tncm91bmQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEJhY2tncm91bmQgPSBzbGlkZXJDb25maWd1cmF0aW9uLnNldEJhY2tncm91bmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2xpZGVyQ29uZmlndXJhdGlvbi50cmFuc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3VwcG9ydGVkVHJhbnNpdGlvbnMuaW5kZXhPZihzbGlkZXJDb25maWd1cmF0aW9uLnRyYW5zaXRpb24pID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uID0gc2xpZGVyQ29uZmlndXJhdGlvbi50cmFuc2l0aW9uO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICAgICAgICAgICdTbGlkZXI6OmNvbnN0cnVjdG9yKCkgPT4gVW5zdXBwb3J0ZWQgdHJhbnNpdGlvbiB0eXBlIFwiJXNcIjsgRmFsbGluZyBiYWNrIHRvIFwiJXNcIicsXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXJDb25maWd1cmF0aW9uLnRyYW5zaXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLiRzbGlkZXNDb250YWluZXIgPSA8SFRNTEVsZW1lbnQ+IHRoaXMuJHNsaWRlci5xdWVyeVNlbGVjdG9yKCcuc2xpZGVzJyk7XG4gICAgICAgIHRoaXMuJCRzbGlkZXMgPSB0aGlzLiRzbGlkZXNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlJyk7XG5cbiAgICAgICAgdGhpcy4kZG90c0NvbnRhaW5lciA9IDxIVE1MRWxlbWVudD4gdGhpcy4kc2xpZGVyLnF1ZXJ5U2VsZWN0b3IoJy5kb3RzJyk7XG5cbiAgICAgICAgaWYgKHRoaXMuJCRzbGlkZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgdGhpcy4kc2xpZGVyLmNsYXNzTGlzdC5hZGQoJ2NvbnRyb2xsYWJsZScpO1xuICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNpdGlvbiA9PSAnc2xpZGUnKSB7XG4gICAgICAgICAgICAgICAgdmFyICRzbGlkZXMgPSA8SFRNTEVsZW1lbnQ+IHRoaXMuJHNsaWRlci5xdWVyeVNlbGVjdG9yKCcuc2xpZGVzJyk7XG4gICAgICAgICAgICAgICAgJHNsaWRlcy5zdHlsZS53aWR0aCA9ICh0aGlzLiQkc2xpZGVzLmxlbmd0aCAqIDEwMCkgKyAnJSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLiRzbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgdGhpcy5oYW5kbGVIb3ZlciwgZmFsc2UpO1xuICAgICAgICB0aGlzLiRzbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCB0aGlzLmhhbmRsZUhvdmVyLCBmYWxzZSk7XG5cbiAgICAgICAgaWYgKHRoaXMuJHNsaWRlci5xdWVyeVNlbGVjdG9yKCcucHJldicpKSB7XG4gICAgICAgICAgICB0aGlzLiRzbGlkZXIucXVlcnlTZWxlY3RvcignLnByZXYnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuYXJyb3dDbGljaywgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiRzbGlkZXIucXVlcnlTZWxlY3RvcignLm5leHQnKSkge1xuICAgICAgICAgICAgdGhpcy4kc2xpZGVyLnF1ZXJ5U2VsZWN0b3IoJy5uZXh0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmFycm93Q2xpY2ssIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnRyYW5zaXRpb24gPT0gJ3NsaWRlJykge1xuICAgICAgICAgICAgdGhpcy4kJHNsaWRlc1swXS5wYXJlbnRFbGVtZW50LnN0eWxlLndpZHRoID0gKHRoaXMuJCRzbGlkZXMubGVuZ3RoICogMTAwKSArICclJztcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpPCB0aGlzLiQkc2xpZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgJHNsaWRlID0gPEhUTUxFbGVtZW50PiB0aGlzLiQkc2xpZGVzW2ldO1xuICAgICAgICAgICAgdmFyIHNsaWRlRGF0YSA9IDxTbGlkZURhdGE+ICRzbGlkZS5kYXRhc2V0O1xuICAgICAgICAgICAgc2xpZGVEYXRhLm51bSA9IChpKzEpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAkc2xpZGUuY2xhc3NMaXN0LmFkZCgnc2xpZGUtJyArIChpKzEpKTtcblxuICAgICAgICAgICAgdmFyICRjdXJyZW50RG90ID0gPEhUTUxTcGFuRWxlbWVudD4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnREb3REYXRhID0gPERvdERhdGE+ICRjdXJyZW50RG90LmRhdGFzZXQ7XG4gICAgICAgICAgICAkY3VycmVudERvdC5jbGFzc05hbWUgPSAnZG90JztcbiAgICAgICAgICAgIGN1cnJlbnREb3REYXRhLm51bSA9IChpKzEpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAkY3VycmVudERvdC5jbGFzc0xpc3QuYWRkKCdzbGlkZS0nICsgKGkrMSkpO1xuXG4gICAgICAgICAgICAkY3VycmVudERvdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZG90Q2xpY2ssIGZhbHNlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLiRkb3RzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZG90c0NvbnRhaW5lci5hcHBlbmRDaGlsZCgkY3VycmVudERvdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zZXRCYWNrZ3JvdW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyICRpbWcgPSA8SFRNTEltYWdlRWxlbWVudD4gJHNsaWRlLnF1ZXJ5U2VsZWN0b3IoJy5zcmMnKTtcbiAgICAgICAgICAgICAgICB2YXIgaW1nRGF0YSA9IDxJbWdEYXRhPiAkaW1nLmRhdGFzZXQ7XG4gICAgICAgICAgICAgICAgJHNsaWRlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArICRpbWcuc3JjICsgJyknO1xuICAgICAgICAgICAgICAgIGltZ0RhdGEucmVhZHkgPSAkaW1nLmNvbXBsZXRlID8gJ3RydWUnIDogJ2ZhbHNlJztcbiAgICAgICAgICAgICAgICAkaW1nLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCB0aGlzLmltZ1JlYWR5Tm90aWZpY2F0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaGVpZ2h0R3VhcmQoKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuaGVpZ2h0R3VhcmQsIGZhbHNlKTtcblxuICAgICAgICBpZiAodGhpcy5zZXRCYWNrZ3JvdW5kKSB7XG4gICAgICAgICAgICB0aGlzLmltZ1JlYWR5V2FpdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hbGxSZWFkeSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLiRzbGlkZXIuY2xhc3NMaXN0LnJlbW92ZSgnd2FpdGluZycpO1xuICAgICAgICAgICAgdGhpcy4kc2xpZGVyLmNsYXNzTGlzdC5hZGQoJ3JlYWR5Jyk7XG4gICAgICAgICAgICB0aGlzLmxvYWRTbGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoZWlnaHRHdWFyZCA9ICgpID0+IHtcbiAgICAgICAgdmFyICRzbGlkZSwgaTtcbiAgICAgICAgLy8gcmVzZXQgbWluSGVpZ2h0XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLiQkc2xpZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAkc2xpZGUgPSA8SFRNTEVsZW1lbnQ+IHRoaXMuJCRzbGlkZXNbaV07XG4gICAgICAgICAgICAkc2xpZGUuc3R5bGUubWluSGVpZ2h0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbnRhaW5lckhlaWdodCA9IHRoaXMuJHNsaWRlc0NvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgICAgIC8vIHNldCBtaW5IZWlnaHRcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuJCRzbGlkZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICRzbGlkZSA9IDxIVE1MRWxlbWVudD4gdGhpcy4kJHNsaWRlc1tpXTtcbiAgICAgICAgICAgICRzbGlkZS5zdHlsZS5taW5IZWlnaHQgPSB0aGlzLmNvbnRhaW5lckhlaWdodCArICdweCc7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcHVibGljIGhhbmRsZUhvdmVyID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ1NsaWRlcjo6aGFuZGxlSG92ZXIoKScpO1xuICAgICAgICAvL2Uuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIC8vZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgaWYgKGUudHlwZSA9PT0gJ21vdXNlb3ZlcicpIHtcbiAgICAgICAgICAgIHRoaXMuYXV0b1Byb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmJsb2NrQXV0b1Byb2dyZXNzKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUudHlwZSA9PT0gJ21vdXNlb3V0Jykge1xuICAgICAgICAgICAgdGhpcy5hdXRvUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5yZXN1bWVBdXRvUHJvZ3Jlc3MoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwdWJsaWMgYmxvY2tBdXRvUHJvZ3Jlc3MgPSAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ1NsaWRlcjo6YmxvY2tBdXRvUHJvZ3Jlc3MoKScpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5uZXh0U2xpZGVUaW1lb3V0KTtcbiAgICAgICAgdGhpcy5uZXh0U2xpZGVUaW1lb3V0ID0gMDtcbiAgICB9O1xuXG4gICAgcHVibGljIHJlc3VtZUF1dG9Qcm9ncmVzcyA9ICgpID0+IHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZygnU2xpZGVyOjpyZXN1bWVBdXRvUHJvZ3Jlc3MoKScpO1xuICAgICAgICBpZiAodGhpcy5hbGxSZWFkeSAmJiB0aGlzLmF1dG9Qcm9ncmVzcykge1xuICAgICAgICAgICAgdGhpcy5uZXh0U2xpZGVUaW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLmxvYWRTbGlkZSwgdGhpcy5uZXh0U2xpZGVEZWxheSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcHVibGljIGxvYWRTbGlkZSA9IChudW0/OiBudW1iZXIpID0+IHtcbiAgICAgICAgdGhpcy5ibG9ja0F1dG9Qcm9ncmVzcygpO1xuICAgICAgICBpZiAoIXRoaXMuYWxsUmVhZHkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgJGN1cnJlbnQsIGN1cnJlbnREYXRhLCAkbmV4dCwgbmV4dERhdGEsIGN1cnJlbnROdW0sIG5leHROdW0sICRjdXJyZW50RG90LCAkbmV4dERvdDtcbiAgICAgICAgJGN1cnJlbnQgPSA8SFRNTEVsZW1lbnQ+IHRoaXMuJHNsaWRlci5xdWVyeVNlbGVjdG9yKCcuc2xpZGUuYWN0aXZlJyk7XG5cbiAgICAgICAgaWYgKCFudW0pIHtcbiAgICAgICAgICAgIGlmICghJGN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAkbmV4dCA9IDxIVE1MRWxlbWVudD4gdGhpcy4kc2xpZGVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZS5pbml0aWFsJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRuZXh0ID0gPEhUTUxFbGVtZW50PiB0aGlzLiRzbGlkZXIucXVlcnlTZWxlY3RvcignLnNsaWRlLmFjdGl2ZSArIC5zbGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEkbmV4dCkge1xuICAgICAgICAgICAgICAgICRuZXh0ID0gPEhUTUxFbGVtZW50PiB0aGlzLiRzbGlkZXIucXVlcnlTZWxlY3RvcignLnNsaWRlOm50aC1jaGlsZCgxKScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJG5leHQgPSA8SFRNTEVsZW1lbnQ+IHRoaXMuJHNsaWRlci5xdWVyeVNlbGVjdG9yKCcuc2xpZGU6bnRoLWNoaWxkKCcgKyBudW0gKyAnKScpO1xuICAgICAgICB9XG4gICAgICAgIG5leHREYXRhID0gPFNsaWRlRGF0YT4gJG5leHQuZGF0YXNldDtcbiAgICAgICAgaWYgKCRjdXJyZW50KSB7XG4gICAgICAgICAgICAkY3VycmVudC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIGN1cnJlbnREYXRhID0gPFNsaWRlRGF0YT4gJGN1cnJlbnQuZGF0YXNldDtcbiAgICAgICAgICAgIGN1cnJlbnROdW0gPSBjdXJyZW50RGF0YS5udW0gfHwgJGN1cnJlbnQuY2xhc3NOYW1lLm1hdGNoKC9zbGlkZS0oXFxkKykvKVsxXTtcbiAgICAgICAgICAgIGlmICh0aGlzLiRkb3RzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgJGN1cnJlbnREb3QgPSA8SFRNTEVsZW1lbnQ+IHRoaXMuJGRvdHNDb250YWluZXIucXVlcnlTZWxlY3RvcignLmRvdDpudGgtY2hpbGQoJyArIGN1cnJlbnROdW0gKyAnKScpO1xuICAgICAgICAgICAgICAgICRjdXJyZW50RG90LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICRuZXh0LmNsYXNzTGlzdC5yZW1vdmUoJ2luaXRpYWwnKTtcbiAgICAgICAgJG5leHQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgIG5leHROdW0gPSBuZXh0RGF0YS5udW0gfHwgJG5leHQuY2xhc3NOYW1lLm1hdGNoKC9zbGlkZS0oXFxkKykvKVsxXTtcbiAgICAgICAgaWYgKHRoaXMuJGRvdHNDb250YWluZXIpIHtcbiAgICAgICAgICAgICRuZXh0RG90ID0gPEhUTUxFbGVtZW50PiB0aGlzLiRkb3RzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5kb3Q6bnRoLWNoaWxkKCcgKyBuZXh0TnVtICsgJyknKTtcbiAgICAgICAgICAgICRuZXh0RG90LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVzdW1lQXV0b1Byb2dyZXNzKCk7XG4gICAgfTtcblxuICAgIHB1YmxpYyBhcnJvd0NsaWNrID0gKGUpID0+IHtcbiAgICAgICAgdmFyICRuZXh0LCBuZXh0RGF0YSwgbnVtLCAkYXJyb3cgPSA8SFRNTEVsZW1lbnQ+IGUudGFyZ2V0O1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGlmICgkYXJyb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdwcmV2JykpIHtcbiAgICAgICAgICAgICRuZXh0ID0gPEhUTUxFbGVtZW50PiB0aGlzLiRzbGlkZXIucXVlcnlTZWxlY3RvcignLnNsaWRlICsgLnNsaWRlLmFjdGl2ZScpO1xuICAgICAgICAgICAgaWYgKCRuZXh0KSB7XG4gICAgICAgICAgICAgICAgJG5leHQgPSAkbmV4dC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkbmV4dCA9IDxIVE1MRWxlbWVudD4gdGhpcy4kc2xpZGVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZTpsYXN0LW9mLXR5cGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoJGFycm93LmNsYXNzTGlzdC5jb250YWlucygnbmV4dCcpKSB7XG4gICAgICAgICAgICAkbmV4dCA9IDxIVE1MRWxlbWVudD4gKHRoaXMuJHNsaWRlci5xdWVyeVNlbGVjdG9yKCcuc2xpZGUuYWN0aXZlICsgLnNsaWRlJykgfHwgdGhpcy4kc2xpZGVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZTpudGgtY2hpbGQoMSknKSk7XG4gICAgICAgIH1cbiAgICAgICAgbmV4dERhdGEgPSA8U2xpZGVEYXRhPiAkbmV4dC5kYXRhc2V0O1xuICAgICAgICBudW0gPSBuZXh0RGF0YS5udW0gfHwgJG5leHQuY2xhc3NOYW1lLm1hdGNoKC9zbGlkZS0oXFxkKykvKVsxXTtcbiAgICAgICAgdGhpcy5sb2FkU2xpZGUobnVtKTtcbiAgICB9O1xuXG4gICAgcHVibGljIGRvdENsaWNrID0gKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICB2YXIgJGRvdCA9IDxIVE1MRWxlbWVudD4gZS50YXJnZXQ7XG4gICAgICAgIHZhciBkb3REYXRhID0gPERvdERhdGE+ICRkb3QuZGF0YXNldDtcbiAgICAgICAgdmFyIG51bSA9IHBhcnNlSW50KGRvdERhdGEubnVtIHx8IGUudGFyZ2V0LmNsYXNzTmFtZS5tYXRjaCgvc2xpZGUtKFxcZCspLylbMV0pO1xuICAgICAgICB0aGlzLmxvYWRTbGlkZShudW0pO1xuICAgIH07XG5cbiAgICBwdWJsaWMgaW1nUmVhZHlOb3RpZmljYXRpb24gPSAoZSkgPT4ge1xuICAgICAgICB2YXIgJGltZyA9IDxIVE1MSW1hZ2VFbGVtZW50PiBlLnRhcmdldDtcbiAgICAgICAgdmFyIGltZ0RhdGEgPSA8SW1nRGF0YT4gJGltZy5kYXRhc2V0O1xuICAgICAgICBpbWdEYXRhLnJlYWR5ID0gJ3RydWUnO1xuICAgIH07XG5cbiAgICBwdWJsaWMgaW1nUmVhZHlXYWl0ID0gKCkgPT4ge1xuICAgICAgICB2YXIgJCRpbWcgPSB0aGlzLiRzbGlkZXIucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlIC5zcmNbZGF0YS1yZWFkeT1cImZhbHNlXCJdJyk7XG4gICAgICAgIGlmICgkJGltZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMuaW1nUmVhZHlXYWl0LCAxMDApO1xuICAgICAgICAgICAgdGhpcy4kc2xpZGVyLmNsYXNzTGlzdC5hZGQoJ3dhaXRpbmcnKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFsbFJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy4kc2xpZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ3dhaXRpbmcnKTtcbiAgICAgICAgdGhpcy4kc2xpZGVyLmNsYXNzTGlzdC5hZGQoJ3JlYWR5Jyk7XG4gICAgICAgIHRoaXMubG9hZFNsaWRlKCk7XG4gICAgfTtcbn1cbiJdfQ==